# 도커 기본

## 도커란?
https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html


## 도커 run 옵션
- `-it`
- `-rm` : 프로세스 중지시 컨테이너 삭제시킴
- `-e` : 컨테이너 환경변수 설정
- `--link` : 컨테이너를 실행할 때 이미 실행중인 다른 컨테이너와 연결. 곧 deprecated 됨

### --name
컨테이너의 이름을 지정.
name을 지정하지 않고 실행한다면 도커가 임의로 이름을 만들지만 우리가 이해하기 쉬운 이름을 꼭 붙여주자.
도커 네트워크의 bridge모드에선 컨테이너를 링크시킬 때 name을 참조한다.

### -p (포트포워딩)
컨테이너와 호스트의 포트를 연결.

도커 컨테이너는 NAT 내부망에서 동작하고 공인IP주소가 아닌 사설IP주소를 사용하기 때문에 컨테이너 외부에서 내부로 접속할 수 없다.
이를 극복하기 위해 포트 포워딩 기법이 사용됨.
> 포트포워딩이란?<br>
라우터/게이트웨이의 특정 포트 번호로 유입되는 트래픽을 NAT 내부에서 동작하는 시스템의 특정 포트로 전달해 주는 기법.<br>
예) 홈서버를 구축할 때, 집 공유기의 80포트로 접속하는 모든 트래픽을 내 PC(사설IP)의 8080포트로 전달하도록 설정 할 수 있음.

다음과 같이 -p 옵션을 사용하여 호스트와 컨테이너의 포트
도커에서 호스트는 도커엔진이 구동중인 물리 컴퓨터(내 PC)이다.
```
docker run -p <host port number>:<container port number>/<protocol> [IMAGE NAME] [OTHER OPTIONS...]
```
- 예) `-p 80:8080`으로 실행 시 호스트의 8080포트로 들어오는 트래픽은 모두 tcp프로토콜을 통해 해당 컨테이너의 8080포트로 전달된다.
- `<protocol>`은 tcp, udp 등을 넣을 수 있고 디폴트는 tcp이다.

참고: https://tttsss77.tistory.com/155

### -v (마운트)
컨테이너와 호스트의 디렉토리를 연결.



### -d (Detached 모드)
컨테이너를 백그라운드(Detached 모드)에서 실행. 도커 실행은 Foreground/Detached 모드가 있는데 Foreground가 디폴트다. Foreground 모드에도 여러 옵션들이 있지만 대부분 백그라운드에서 실행하니 패스.
-d 옵션을 붙이지 않고 실행한다면, `^C`로 프로세스 중지시 컨테이너가 중지된다.
