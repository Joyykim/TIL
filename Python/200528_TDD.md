#  테스트 코드, TDD

## 구체적인 행동 레벨에서의 TDD의 개념

테스트를 먼저 만들고 테스트를 통과하기 위한 것을 짜는 것 즉, 만드는 과정에서 우선 테스트를 작성하고 그걸 통과하는 코드를 만드는 루틴을 반복하면서 제대로 동작하는지에 대한 피드백을 적극적으로 받는 것이다.

## 추상적인 레벨에서의 TDD의 핵심 개념(중요)

결정과 피드백 사이의 갭에 대한 인식, 더 나아가 결정과 피드백 사이의 갭을 조절하기 위한 테크닉이라고도 할 수 있다.

## TDD와 객체지향

테스트-주도 개발의 기본 흐름은 실패하는 테스트를 작성하고, 테스트를 통과하는 가장 간단한 코드를 작성한 후, 리팩터링을 통해 중복을 제거하는 것이다.
테스트-주도 개발은 객체가 이미 존재한다고 가정하고 객체에게 어떤 메시지를 전송할 것인지에 관해 먼저 생각하라고 충고한다. 그러나 이 같은 종류의 충고는 역할, 책임, 협력의 관점에서 객체를 바라보지 않을 경우 무의미하다.

테스트-주도 개발은 테스트를 작성하는 것이 아니라 책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메시지를 수신할 때 어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것이다.

테스트를 작성하기 위해 객체의 메서드를 호출하고 반환값을 검증하는 것은 순간적으로 객체가 수행해야 하는 책임에 관해 생각한 것이다. 테스트에 필요한 간접 입력 값을 제공하기 위해 스텁(stub)을 추가하거나 간접 출력 값을 검증하기 위해 목 객체(mock object)를 사용하는 것은 객체와 협력해야 하는 협력자에 관해 고민한 결과를 코드로 표현한 것이다.

출처: https://jongmin92.github.io/2019/02/10/Programming/object_oriented_facts_and_misunderstandings/

## transaction
일련의 명령?을 묶는 단위. 중간에 오류가 나면 그 전의 행동은 모두 롤백해서 원자성(더 작은 단위로 분해될 수 없는 성질)을 보장합니다.
테스트 코드를 트랜잭션으로 wrap하고 마지막에 강제로 롤백해서 DB에는 흔적이 남지 않습니다.

## 테스트 코드 모듈 실행
unittest.TestCase 상속해서 테스트케이스 클래스 생성
테스트 코드의 메소드 이름을 test로 시작
python -m unittest file.py

## CI
CI - Continuous Integration (지속적인 통합)
CI 과정에서 작성한 코드를 merge할 때 자동화 테스트 코드를 통과해야만 merge 

깃허브에서 발생하는 이벤트를 수신해서 젠킨스, Circle CI 등의 CI 서버에서 테스트 코드 자동화 가능! 하지만 CI 서버에서는 깃허브에서 이벤트 수신만 할 뿐 실제 로직(테스트, 빌드 자동화 등)은 개발자가 구축해야함