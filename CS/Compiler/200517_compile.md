# 컴파일

## 개념
컴파일이란 어떤 언어의 코드를 다른 언어로 바꿔주는 과정. 대표적인 예는 C++ 코드를 기계어로 바꿔주는 것이다. 사전적 의미는 '엮다, 편집하다, 편찬하다' 라는 뜻이다.

## 개요
초기엔 프로그램을 작성하기 위해서는 컴퓨터 위에서 바로 돌아가는 기계어를 통하여 프로그래밍을 했다. 그러나 이런 과정은 생산성, 기기 간 호환성, 디버깅 등 모든 면에서 효율적이지 않다. 따라서 컴퓨터공학이 발전하면서 많은 부분 추상화된 고수준 언어를 작성하고 이를 번역기를 통해 기계어로 번역하기 시작했는데, 이 번역기가 바로 컴파일러이다.

현재 많은 프로그램은 컴파일러를 통하여 전체를 기계어로 번역하여 실행하므로 프로그램 개발에 필수적인 툴 중에 하나다.

## 분류
1. 원시 코드를 바로 기계어로 변환하는 정적 컴파일(Static Compilation)
2. 바이트코드 등의 중간 코드를 기계어로 변환하는 AOT 컴파일(Ahead-Of-Time Compilation)
3. 실행시 최초 한 번에 한해 컴파일을 거치는 JIT 컴파일(Just-In-Time Compilation)

(어셈블러는 기계어와 1대1 대응하는 특수성 때문에 컴파일러와는 구분된다.)

## 부트스트래핑
한 언어의 컴파일러를 자신의 언어로 재작성하는 것을 부트스트래핑이라고 한다. 재밌는 것은 컴파일러도 결국 하나의 언어로 짜여진 프로그램이라는 점. 따라서 바이너리 포맷의 파일을 쓸 수 있고 트리 자료구조를 생성할 수 있는 언어는 부트스트래핑(bootstrapping)이 가능하다. 범용 목적 프로그래밍 언어는 당연히 이 조건을 만족하므로 부트스트래핑이 가능하다.

컴파일러의 최초 버전만 다른 언어용의 컴파일러 또는 어셈블러의 도움을 받아 만들고 나면 컴파일러가 자기 자신의 언어로 짜여질 수 있다.

최초의 뗀석기는 짱돌로 만들고 그 다음에는 뗀석기로 뗀석기를 만들 수 있다는 느낌?

## 링커
원칙적으로 컴파일러는 프로그램을 기계어로 바꾸기만 할 뿐 이를 바로 실행이 가능하게 하지는 않는다. 여러 소스 파일에서 나온 결과물을 합치고 라이브러리도 포함시키는 등 별도의 작업을 거쳐야 실행이 가능해지는데 이를 수행하는 프로그램이 링커이다. 하지만 보통은 그냥 뭉뚱그려 컴파일러라 부르는 경우가 많다. 또한 요즘은 그냥 프로그램 하나만 돌리면 컴파일과 링킹을 한 번에 끝낼 수 있게 되어 있다. 물론 내부적으로는 컴파일러와 링커가 따로 있어서 이를 이용하는 경우가 많지만.

## 인터프리터
컴파일을 하는 대신, 소스를 한꺼번에 번역하지 않고 명령 하나하나를 실행할 때마다 해석하여 계산하는 방법도 있는데 이 해석기를 인터프리터라 해서 따로 분류한다. 컴파일러가 번역기라면 인터프리터는 통역기인셈.
인터프리터 언어에 비해 컴파일 언어의 단점은 수정이 용이하지 않다는 점이다. 수정 사항이 발생하면 다시 컴파일을 해야 되는데, 작은 프로그램일 경우에는 문제가 되지 않지만 컴파일이 몇 시간씩 걸리는 덩치 큰 프로그램에서는 문제가 된다. 특히 수정 사항이 빈번하게 발생할 경우에는 큰 문제가 된다. 이 때문에 수정 사항이 빈번하게 발생할 것 같은 부분은 인터프리터를 쓰는 방법으로 따로 빼 두는 기법을 많이 사용한다. (인터프리터는 속도는 느리지만 수정이 간단하다는 장점이 있다.)

## 크로스 컴파일러
다른 CPU나 다른 운영체제에서 작동하는 실행코드를 만들어주는 컴파일러. 예를 들자면 ARM에서 구동시킬 실행파일을 x86-64 리눅스 환경에서 컴파일 및 링크하는 것을 말한다.
보통 임베디드 시스템에서 작동시킬 실행파일을 만들 때 사용한다. 주된 이유는 속도와 생산성 때문. 컴파일 과정은 CPU 작업을 상당히 많이 요구하며, 임베디드 시스템은 CPU 성능이 떨어지고 메모리가 협소하기 때문에 고성능 컴퓨터에서 편리하게 코드를 편집하고 컴파일 작업을 진행하는 것이 훨씬 더 빠르고 생산성이 좋다.
486~586 수준의 임베디드 시스템 내에서 직접 컴파일하는 것도 가능하지만, 고성능 x86-64 머신을 사용하는 게 20배 이상 빠르다.

안드로이드(운영체제)나 아이폰에서 작동하는 앱을 만들기 위해 윈도우나 iMac에서 개발도구로 실행파일을 만들어내는 것은 모두 크로스 컴파일에 속한다.